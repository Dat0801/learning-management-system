<div class="course-card" [routerLink]="['/courses', course.id]">
  <div class="thumbnail">
    <img *ngIf="course.thumbnail" [src]="course.thumbnail" [alt]="course.title">
    <div *ngIf="!course.thumbnail" class="placeholder-img">
      <span>{{ course.title | slice:0:1 }}</span>
    </div>
    
    <button 
      class="wishlist-btn" 
      [class.active]="isInWishlist"
      (click)="toggleWishlist($event)"
      [title]="isInWishlist ? 'Remove from wishlist' : 'Add to wishlist'"
    >
      <i class="fa-heart" [ngClass]="isInWishlist ? 'fas' : 'far'"></i>
    </button>
  </div>
  
  <div class="content">
    <h3 class="title" [title]="course.title">{{ course.title }}</h3>
    <p class="instructor">By {{ course.instructor?.name }}</p>
    
    <div class="rating-row" *ngIf="!course.is_enrolled">
      <span class="rating-number">{{ course.average_rating || '0.0' }}</span>
      <div class="stars">
        <i class="fas fa-star" [class.active]="(course.average_rating || 0) >= 1"></i>
        <i class="fas fa-star" [class.active]="(course.average_rating || 0) >= 2"></i>
        <i class="fas fa-star" [class.active]="(course.average_rating || 0) >= 3"></i>
        <i class="fas fa-star" [class.active]="(course.average_rating || 0) >= 4"></i>
        <i class="fas fa-star" [class.active]="(course.average_rating || 0) >= 5"></i>
      </div>
      <span class="review-count">({{ course.reviews_count || 0 }})</span>
    </div>

    <div class="footer">
      <div *ngIf="course.is_enrolled; else notEnrolled" class="enrolled-status">
        <div class="progress-bar-container">
          <div class="progress-bar" [style.width.%]="course.progress || 0"></div>
        </div>
        <span class="progress-text">{{ course.progress || 0 }}% Complete</span>
      </div>
      
      <ng-template #notEnrolled>
        <div class="price-action-row">
          <div class="price-container">
            <span class="price" *ngIf="course.price > 0">${{ course.price }}</span>
            <span class="price free" *ngIf="course.price == 0">Free</span>
          </div>
          <button class="cart-btn" (click)="$event.stopPropagation()">
            <i class="fas fa-shopping-cart"></i>
          </button>
        </div>
      </ng-template>
    </div>
  </div>
</div>
